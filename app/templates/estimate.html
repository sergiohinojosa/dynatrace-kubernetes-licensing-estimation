{% extends "base.html" %}

{% block title %} Estimate {% endblock %}

{% block body %}

Data stored in the session:
{% if estimate is not none %}
<p> session Estimate mem: {{ estimate }} </p>
<p> Tenant: {{ estimate.tenant_url}} </p>
<p> K8s costs: {{ estimate.k8_costs}} </p>
<p> App costs: {{ estimate.app_costs}} </p>
<p> Total Pod Hours: {{ estimate.t_pod_h}} </p>
<p> Total Gib Hours: {{ estimate.t_gib_h}} </p>
<p> Total shortliving instances: {{ estimate.t_shortliving_instances}} </p>
<p> Total instances: {{ estimate.t_instances}} </p>
{% endif %}

<p>
    <p>Session UID {{ session.uid }} </p>
</p>

{% if estimate.estimation_running %}
Running.....

<p>Tenant URL: {{ session.tenant_url }} </p>
<p>API-Token: {{ session.api_token }} </p>

{% else %}
NOT Running, so lets print form
<form action="/estimate" method="POST">
    <div class="login">
        <div class="login-screen">
            <div class="app-title">
                <h1>Estimate Kubernetes Usage</h1>
            </div>
            <div class="estimate-form">
                <div class="control-group">
                        <input type="tenant_url" name="tenant_url" placeholder="Tenant URL">
                        <br>
                        <input type="password" name="api_token" placeholder="API Token">
                        <br>
            </div>
                    <input type="submit" value="Estimate costs" class="btn btn-primary btn-lg btn-block">
                <br>
            </div>
        </div>
    </div>
</form>
    {% if estimate.errors %}
    <p class=has-error><strong>There was an error:</strong> {{ estimate.errors }}</p>
    {% endif %}

{% endif %}

{% endblock %}